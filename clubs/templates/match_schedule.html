{% extends 'base_content.html' %}
{% block content %}

  <style>
  table,th,td{
    border: 1px solid black;
  }
  </style>

  {% if final_match %}
    {% for match in final_match %}
      {% if match.winner != None %}
        <h3>Tournament winner: {{ match.winner.first_name }} {{ match.winner.last_name }}</h3>
      {% endif %}
    {% endfor %}
  {% endif %}

  {% if round_of_16_matches or quarter_final_matches or semi_final_matches or final_match %}
    <h3>Elimination Rounds</h3>
<<<<<<< HEAD
    <table>
      <tr>
        <th>Match Number</th>
        <th> Player One </th>
        <th> Player Two </th>
        <th> Results </th>
      </tr>
      {% for match in elim_matches %}
      <tr>
        {% if match.match.player1 or match.match.player2 %}
          <td>{{ match.match.number }}</td>
          <td>{{ match.match.player1.first_name }} {{ match.match.player1.last_name }}</td>
          <td> {{ match.match.player2.first_name }} {{ match.match.player2.last_name }} </td>
          {% if match.winner == None and match.match.player1 and match.match.player2%}
          <td>
            <form action="{% url 'enter_match_results' club_id=club_id tournament_id=tournament.id match_id=match.id %}" method="post">
              {% csrf_token %}
              {% include 'partials/bootstrap_form.html' with form=form %}
              <select name='winner'>
                <option value= "{{match.match.player1.id}}">{{ match.match.player1.first_name }} {{ match.match.player1.last_name }}</option>
                <option value= "{{match.match.player2.id}}">{{ match.match.player2.first_name }} {{ match.match.player2.last_name }}</option>
              </select>
              <input type= "submit" value="Submit Results"/>
            </form>
          </td>
          {%else%}
          <td>{{match.winner.first_name}} {{match.winner.last_name}}</td>
          {% endif%}
        {% endif %}
      </tr>
      {% endfor %}
    </table>
=======
    <div class="row">
      {% if round_of_16_matches %}
        <div class="col">
          <h5>Round-of-16</h5>
          {% include 'partials/elimination_round_match_schedule_table.html' with elim_round_matches=round_of_16_matches %}
        </div>
      {% endif %}
      {% if quarter_final_matches %}
        <div class="col">
          <h5>Quarter-final</h5>
          {% include 'partials/elimination_round_match_schedule_table.html' with elim_round_matches=quarter_final_matches %}
        </div>
      {% endif %}
      {% if semi_final_matches %}
        <div class="col">
          <h5>Semi-final</h5>
          {% include 'partials/elimination_round_match_schedule_table.html' with elim_round_matches=semi_final_matches %}
        </div>
      {% endif %}
      <div class="col">
        <h5>Final</h5>
        {% include 'partials/elimination_round_match_schedule_table.html' with elim_round_matches=final_match %}
      </div>
    </div>
    <br></br>
>>>>>>> main
  {% endif %}

  {% if g32_groups %}
    <h3>Round of 32</h3>
    {% for group in g32_groups %}
      <div class="row">
        <div class="col">
          <table>
            <h5>Group Number {{group.number}}</h5>
            <tr>
              <th>Match Number</th>
              <th> Player One </th>
              <th> Player Two </th>
              <th> Winner </th>
            </tr>
            {% for group_match in group.get_group_groupmatches %}
              <tr>
                {% if group_match.display %}
                  <td>{{ group_match.match.number }}</td>
                  <td>{{ group_match.match.player1.first_name }} {{ group_match.match.player1.last_name }}</td>
                  <td> {{ group_match.match.player2.first_name }} {{ group_match.match.player2.last_name }} </td>
                  {% if group_match.player1_points == 0 and group_match.player2_points == 0%}
                  <td>
                    <form action="{% url 'enter_match_results_groups' club_id=club_id tournament_id=tournament.id match_id=group_match.id %}" method="post">
                      {% csrf_token %}
                      {% include 'partials/bootstrap_form.html' with form=form %}
                      <select name='result'>
                        <option value="player1">{{ group_match.match.player1.first_name }} {{ group_match.match.player1.last_name }}</option>
                        <option value="player2">{{ group_match.match.player2.first_name }} {{ group_match.match.player2.last_name }}</option>
                        <option value='draw'>Draw</option>
                      </select>
                      <input type= "submit" value="Submit Results"/>
                    </form>
                  </td>
                  {%elif group_match.player1_points == 1 %}
                  <td>{{ group_match.match.player1.first_name }} </td>
                  {%elif group_match.player2_points == 1 %}
                  <td>{{ group_match.match.player2.first_name }}</td>
                  {%else%}
                  <td>Draw</td>
                {% endif %}
                {%endif%}
              </tr>
            {% endfor %}
          </table>
          <br></br>
        </div>
        <div class="col">
          <table>
            <h5>Group Number {{group.number}}</h5>
            <tr>
              <th> Player </th>
              <th> Total player points </th>
            </tr>
              {% for group_points in group.get_group_grouppoints %}
                  <tr>
                    <td>{{ group_points.player.first_name }} {{ match.match.player.last_name }}</td>
                    <td> {{ group_points.total_group_points }}</td>
                  </tr>
              {% endfor %}
          </table>
          <br></br>
        </div>
      </div>
    {% endfor %}
  {% endif %}

  {% if request.user == tournament.organiser%}
    {% if tournament.current_stage == 'S' %}
        <form action="{% url 'generate_next_matches' club_id=club_id tournament_id=tournament.id%}" method="get">
            <button class="btn btn-primary">Generate next matches</button>
        </form>
    {% elif tournament.current_stage == 'G32' %}
        <form action="{% url 'generate_next_matches' club_id=club_id tournament_id=tournament.id%}" method="get">
            <button class="btn btn-primary">Generate matches</button>
        </form>
    {% elif tournament.current_stage == 'E' %}
        <form action="{% url 'generate_next_matches' club_id=club_id tournament_id=tournament.id%}" method="get">
            <button class="btn btn-primary">Generate elimination matches</button>
        </form>
    {% endif %}
  {% endif %}
{% endblock %}
